@import url('https://fonts.googleapis.com/css2?family=Neucha&display=swap');
@import "tailwindcss";
@import "tw-animate-css";

/* Définition de la police Neucha pour les titres */
.font-heading {
  font-family: 'Neucha', cursive;
}

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

:root {
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
  
  /* Couleurs personnalisées pour le header */
  --custom-color: #183933;
  --custom-color-2: #deaf00;
  --custom-color-3: #0d2c3b;
  
  /* Variables pour l'accordéon */
  --main: #88aaee;
  --overlay: rgba(0, 0, 0, 0.8);
  --bg: #dfe5f2;
  --bw: #fff;
  --blank: #000;
  --border: #000;
  --text: #000;
  --mtext: #000;
  --ring: #000;
  --ring-offset: #fff;
  --border-radius: 5px;
  --box-shadow-x: 4px;
  --box-shadow-y: 4px;
  --reverse-box-shadow-x: -4px;
  --reverse-box-shadow-y: -4px;
  --base-font-weight: 500;
  --heading-font-weight: 700;
  --shadow: var(--box-shadow-x) var(--box-shadow-y) 0px 0px var(--border);
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  
  /* Classes utilitaires pour les couleurs personnalisées */
  .bg-custom-color {
    background-color: var(--custom-color);
  }
  .bg-custom-color-2 {
    background-color: var(--custom-color-2);
  }
  .bg-custom-color-3 {
    background-color: var(--custom-color-3);
  }
  
  .text-custom-color {
    color: var(--custom-color);
  }
  .text-custom-color-2 {
    color: var(--custom-color-2);
  }
  .text-custom-color-3 {
    color: var(--custom-color-3);
  }
  
  .border-custom-color {
    border-color: var(--custom-color);
  }
  .border-custom-color-2 {
    border-color: var(--custom-color-2);
  }
  .border-custom-color-3 {
    border-color: var(--custom-color-3);
  }

  body {
    @apply bg-background text-foreground;
    /* Empêcher le défilement horizontal sur mobile */
    overflow-x: hidden;
    width: 100%;
    position: relative;
  }
  
  /* Empêcher le défilement horizontal sur tous les éléments */
  html {
    overflow-x: hidden;
    width: 100%;
  }
  
  /* S'assurer que le conteneur principal ne déborde pas */
  #__next {
    overflow-x: hidden;
    width: 100%;
  }
  
  /* Correction pour les éléments avec position absolue */
  .absolute {
    max-width: 100vw;
  }
  
  /* Correction pour les images dans le hero */
  .hero-image {
    max-width: 100%;
    height: auto;
  }
  
  /* Correction pour mobile - empêcher les débordements */
  @media (max-width: 768px) {
    body {
      overflow-x: hidden;
      width: 100vw;
    }
    
    /* S'assurer que tous les conteneurs respectent la largeur de l'écran */
    .container {
      max-width: 100vw;
      overflow-x: hidden;
    }
    
    /* Correction pour les éléments positionnés en absolu */
    [class*="absolute"] {
      max-width: 100vw;
      left: clamp(0%, var(--left, 0%), calc(100% - 100px));
    }
  }
}

/* Leaflet Styles */
.leaflet-container {
  font-family: inherit;
}

.leaflet-popup-content-wrapper {
  border-radius: 8px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

.leaflet-popup-content {
  margin: 12px 16px;
  font-size: 14px;
  line-height: 1.4;
}

.leaflet-popup-tip {
  background: white;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

.custom-marker {
  background: transparent !important;
  border: none !important;
}

/* Marqueur Le Clos des Rossignols */
.clos-des-rossignols-marker {
  background: transparent !important;
  border: none !important;
}

/* Forcer la couleur de fond des composants FAQ details */
details.faq-3d-shadow {
  background-color: var(--custom-color) !important;
}

details.faq-3d-shadow[open] {
  background-color: var(--custom-color) !important;
}

details.faq-3d-shadow summary {
  background-color: var(--custom-color) !important;
}

details.faq-3d-shadow[open] summary {
  background-color: var(--custom-color) !important;
}

.clos-des-rossignols-marker > div {
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
}

/* Marqueur de la ville */
.city-marker {
  background: transparent !important;
  border: none !important;
}

.city-marker > div {
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
}

/* Animation des marqueurs au survol */
.clos-des-rossignols-marker:hover > div,
.city-marker:hover > div {
  transform: scale(1.1);
  transition: transform 0.3s ease;
}

/* Style Peanut - Forme personnalisée pour les boutons et images */
@supports ((-webkit-clip-path: url(#peanut)) or (clip-path:url(#peanut))) and (not (-ms-ime-align:auto)) {
  .c-button--primary {
    -webkit-filter: drop-shadow(0 .125rem .625rem rgba(0,0,0,.2));
    filter: drop-shadow(0 .125rem .625rem rgba(0,0,0,.2));
  }

  .c-button--primary .c-button__inner {
    padding: 0;
    border-radius: 0;
    box-shadow: none;
    -webkit-clip-path: url(#peanut);
    clip-path: url(#peanut);
  }
}

/* Classes utilitaires pour la forme peanut */
.peanut-shape {
  -webkit-clip-path: url(#peanut);
  clip-path: url(#peanut);
}

.peanut-button {
  -webkit-filter: drop-shadow(0 .125rem .625rem rgba(0,0,0,.2));
  filter: drop-shadow(0 .125rem .625rem rgba(0,0,0,.2));
}

.peanut-button .peanut-inner {
  padding: 0;
  border-radius: 0;
  box-shadow: none;
  -webkit-clip-path: url(#peanut);
  clip-path: url(#peanut);
}

/* Définition de la forme peanut avec SVG inline */
.peanut-shape::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: inherit;
  -webkit-clip-path: path('M0,20 Q0,0 20,0 L80,0 Q100,0 100,20 L100,80 Q100,100 80,100 L20,100 Q0,100 0,80 Z');
  clip-path: path('M0,20 Q0,0 20,0 L80,0 Q100,0 100,20 L100,80 Q100,100 80,100 L20,100 Q0,100 0,80 Z');
}

/* Alternative avec une forme peanut plus simple */
.peanut-simple {
  -webkit-clip-path: path('M0,25 Q0,0 25,0 L75,0 Q100,0 100,25 L100,75 Q100,100 75,100 L25,100 Q0,100 0,75 Z');
  clip-path: path('M0,25 Q0,0 25,0 L75,0 Q100,0 100,25 L100,75 Q100,100 75,100 L25,100 Q0,100 0,75 Z');
}

/* Forme peanut organique - découpage à la main */
.peanut-organic {
  -webkit-clip-path: path('M5,15 Q0,5 8,0 L25,0 Q35,0 40,5 L45,0 L65,0 Q75,0 80,8 L85,0 L92,0 Q100,5 100,15 L100,25 Q100,35 95,40 L100,45 L100,65 Q100,75 92,80 L100,85 L100,92 Q100,100 92,100 L85,100 L65,100 Q55,100 50,95 L45,100 L25,100 Q15,100 8,92 L5,100 L0,92 Q0,85 5,80 L0,75 L0,65 Q0,55 5,50 L0,45 L0,25 Q0,15 5,15 Z');
  clip-path: path('M5,15 Q0,5 8,0 L25,0 Q35,0 40,5 L45,0 L65,0 Q75,0 80,8 L85,0 L92,0 Q100,5 100,15 L100,25 Q100,35 95,40 L100,45 L100,65 Q100,75 92,80 L100,85 L100,92 Q100,100 92,100 L85,100 L65,100 Q55,100 50,95 L45,100 L25,100 Q15,100 8,92 L5,100 L0,92 Q0,85 5,80 L0,75 L0,65 Q0,55 5,50 L0,45 L0,25 Q0,15 5,15 Z');
}

/* Forme peanut encore plus organique et irrégulière */
.peanut-handmade {
  -webkit-clip-path: url(#blob);
  clip-path: url(#blob);
}

/* SVG Blob pour la forme organique */
.blob-shape {
  -webkit-clip-path: url(#blob);
  clip-path: url(#blob);
}

/* SVG inline pour le blob */
.blob-svg {
  position: absolute;
  height: 0;
  width: 0;
  pointer-events: none;
}

.blob-svg svg {
  height: 0;
  width: 0;
}

.blob-svg clipPath {
  height: 0;
  width: 0;
}

/* Bulles flottantes animées pour la section Zoo de Beauval */
.floating-bubble {
  position: absolute;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.3) 70%, rgba(255,255,255,0.1) 100%);
  backdrop-filter: blur(10px);
  border: 2px solid rgba(255,255,255,0.2);
  animation: float 8s ease-in-out infinite;
  will-change: transform;
}

.bubble-1 {
  width: 60px;
  height: 60px;
  top: 20%;
  left: 15%;
  animation-delay: 0s;
  animation-duration: 12s;
}

.bubble-2 {
  width: 40px;
  height: 40px;
  top: 60%;
  left: 25%;
  animation-delay: 2s;
  animation-duration: 10s;
}

.bubble-3 {
  width: 80px;
  height: 80px;
  top: 30%;
  right: 20%;
  animation-delay: 4s;
  animation-duration: 15s;
}

.bubble-4 {
  width: 50px;
  height: 50px;
  bottom: 25%;
  left: 35%;
  animation-delay: 6s;
  animation-duration: 11s;
}

.bubble-5 {
  width: 70px;
  height: 70px;
  top: 70%;
  right: 30%;
  animation-delay: 8s;
  animation-duration: 13s;
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px) translateX(0px) scale(1);
    opacity: 0.7;
  }
  25% {
    transform: translateY(-20px) translateX(15px) scale(1.1);
    opacity: 0.9;
  }
  50% {
    transform: translateY(-10px) translateX(-10px) scale(0.9);
    opacity: 0.8;
  }
  75% {
    transform: translateY(-15px) translateX(20px) scale(1.05);
    opacity: 0.6;
  }
}

/* Animation des bulles au scroll (sans bloquer le scroll) */
.floating-bubble {
  transition: transform 0.3s ease-out;
}

/* Styles pour l'accordéon */
.rounded-base {
  border-radius: var(--border-radius);
}

.shadow-shadow {
  box-shadow: var(--shadow);
}

.bg-main {
  background-color: var(--main);
}

.bg-bw {
  background-color: var(--bw);
}

.text-mtext {
  color: var(--mtext);
}

.border-border {
  border-color: var(--border);
}

.font-heading {
  font-weight: var(--heading-font-weight);
}

.font-base {
  font-weight: var(--base-font-weight);
}

/* Animations pour l'accordéon */
@keyframes accordion-down {
  from {
    height: 0;
  }
  to {
    height: var(--radix-accordion-content-height);
  }
}

@keyframes accordion-up {
  from {
    height: var(--radix-accordion-content-height);
  }
  to {
    height: 0;
  }
}

.animate-accordion-down {
  animation: accordion-down 300ms cubic-bezier(0.87, 0, 0.13, 1);
}

.animate-accordion-up {
  animation: accordion-up 300ms cubic-bezier(0.87, 0, 0.13, 1);
}

/* Styles pour les éléments details/summary accessibles */
details {
  transition: all 0.3s ease;
}

details[open] {
  transform: scale(1.02);
}

details[open] summary {
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
}

summary {
  transition: all 0.3s ease;
  user-select: none;
}

summary:hover {
  background-color: rgba(222, 175, 0, 0.1);
}

summary:focus {
  outline: none;
}

summary:focus-visible {
  outline: 2px solid var(--custom-color-2);
  outline-offset: 2px;
}

/* Animation de rotation pour l'icône de déploiement */
details[open] summary .group-open\:rotate-180 {
  transform: rotate(180deg);
}

/* Support pour les navigateurs qui ne supportent pas details/summary */
@supports not (selector(details)) {
  .faq-fallback {
    display: block;
  }
  
  details {
    display: none;
  }
}

/* Masquer le fallback par défaut */
.faq-fallback {
  display: none;
}

/* Afficher le fallback quand JavaScript est désactivé */
noscript .faq-fallback {
  display: block;
}

/* Masquer les éléments details quand le fallback est affiché */
noscript details {
  display: none;
}

/* Effets 3D pour les paragraphes de la ville */
.city-paragraph-3d {
  position: relative;
  z-index: 10;
  background-color: var(--custom-color-2) !important;
}

.city-paragraph-3d summary {
  background-color: var(--custom-color-2) !important;
}

.city-paragraph-3d > div {
  background-color: var(--custom-color-2) !important;
}

/* Correction pour l'effet 3D des paragraphes */
.city-paragraph-3d::before {
  content: '';
  position: absolute;
  bottom: -8px;
  right: -8px;
  width: 100%;
  height: 100%;
  background: black;
  border-radius: 1rem;
  opacity: 0.6;
  transition: all 0.5s ease;
  z-index: -1;
}

/* Animation de l'ombre au survol pour les paragraphes */
.group:hover .city-paragraph-3d::before {
  opacity: 0.8;
  transform: translateY(-4px) translateX(-4px);
}

.group:hover .city-paragraph-3d {
  transform: translateY(-4px) translateX(-4px);
}

/* Masquer le fallback par défaut pour les paragraphes */
.city-paragraph-fallback {
  display: none;
}

/* Afficher le fallback quand JavaScript est désactivé */
noscript .city-paragraph-fallback {
  display: block;
}

/* Masquer les éléments details quand le fallback est affiché */
noscript .city-paragraph-3d {
  display: none;
}

/* Effets 3D pour les cartes FAQ */
.faq-3d-shadow {
  position: relative;
  z-index: 10;
}

.faq-3d-shadow::before {
  content: '';
  position: absolute;
  bottom: -8px;
  right: -8px;
  width: 100%;
  height: 100%;
  background: black;
  border-radius: 1rem;
  opacity: 0.6;
  transition: all 0.5s ease;
  z-index: -1;
}

/* Animation de l'ombre au survol - une seule ombre */
.group:hover .faq-3d-shadow::before {
  opacity: 0.8;
  transform: translateY(-4px) translateX(-4px);
}

/* Suppression des ombres en double */
.group:hover .faq-3d-shadow {
  transform: translateY(-4px) translateX(-4px);
}

/* Amélioration de l'accessibilité pour les lecteurs d'écran */
summary::-webkit-details-marker {
  display: none;
}

summary::marker {
  display: none;
}

/* S'assurer que les details s'ouvrent correctement */
details[open] {
  background-color: var(--custom-color-2) !important;
}

details[open] summary {
  background-color: var(--custom-color-2) !important;
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
}

/* Correction pour éviter la transparence */
.city-paragraph-3d,
.city-paragraph-3d summary,
.city-paragraph-3d > div,
.city-paragraph-3d details[open] {
  background-color: var(--custom-color-2) !important;
  background: var(--custom-color-2) !important;
}

/* S'assurer que le texte reste visible au hover */
.city-paragraph-3d:hover,
.city-paragraph-3d:hover summary,
.city-paragraph-3d:hover > div,
.city-paragraph-3d:hover .text-custom-color {
  color: var(--custom-color) !important;
  background-color: var(--custom-color-2) !important;
}

/* Empêcher la transparence du texte au hover */
.city-paragraph-3d:hover p,
.city-paragraph-3d:hover h1,
.city-paragraph-3d:hover h2,
.city-paragraph-3d:hover h3,
.city-paragraph-3d:hover li,
.city-paragraph-3d:hover strong,
.city-paragraph-3d:hover em {
  color: var(--custom-color) !important;
  opacity: 1 !important;
}

/* S'assurer que l'effet de brillance n'interfère pas avec le texte */
.city-paragraph-3d .absolute.inset-0 {
  pointer-events: none;
  z-index: 1;
}

.city-paragraph-3d .text-custom-color {
  position: relative;
  z-index: 2;
}

/* Empêcher la propagation des événements de clic sur le summary */
.city-paragraph-3d summary {
  pointer-events: auto;
}

/* S'assurer que le numéro et la flèche restent visibles au hover */
.city-paragraph-3d:hover .w-12.h-12,
.city-paragraph-3d:hover .w-8.h-8 {
  background-color: var(--custom-color) !important;
  color: var(--custom-color-2) !important;
}

.city-paragraph-3d:hover .w-12.h-12 svg,
.city-paragraph-3d:hover .w-8.h-8 svg {
  color: var(--custom-color-2) !important;
}

/* Forcer la visibilité des éléments importants au hover */
.city-paragraph-3d:hover .flex-shrink-0 {
  opacity: 1 !important;
  visibility: visible !important;
}

/* Styles spécifiques pour le numéro et la flèche */
.paragraph-number,
.paragraph-arrow {
  position: relative;
  z-index: 10;
}

.city-paragraph-3d:hover .paragraph-number,
.city-paragraph-3d:hover .paragraph-arrow {
  background-color: var(--custom-color) !important;
  color: var(--custom-color-2) !important;
}

.city-paragraph-3d:hover .paragraph-arrow svg {
  color: var(--custom-color-2) !important;
}

/* S'assurer que ces éléments ne disparaissent jamais */
.paragraph-number,
.paragraph-arrow,
.paragraph-number *,
.paragraph-arrow * {
  opacity: 1 !important;
  visibility: visible !important;
}

/* Effet de parallaxe léger au scroll */
@media (prefers-reduced-motion: no-preference) {
  .floating-bubble {
    will-change: transform;
  }
}
